<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bible Verse Fetch</title>
</head>
<body>
    <h1>Bible Verse Fetch</h1>
    <input type="text" id="bibleReference" placeholder="Enter Bible reference">
    <button onclick="fetchBibleVerse(document.getElementById('bibleReference').value)">Fetch</button>
    <div id="result"></div>

    <script>
        async function fetchBibleVerse(ref) {
            const resultDiv = document.getElementById('result');

            // Parse the reference
            const [bookChapter, verses] = ref.split(':');
            const [book, chapter] = bookChapter.split(' ');
            const bookLower = book.toLowerCase();
            let verseStart, verseEnd;

            if (verses) {
                if (verses.includes('-')) {
                    // Handle range of verses
                    [verseStart, verseEnd] = verses.split('-');
                } else if (verses.includes('ff')) {
                    // Handle "ff" (following verses)
                    verseStart = verses.replace('ff', '');
                    verseEnd = 'end'; // Placeholder for actual logic
                } else {
                    // Single verse or multiple verses separated by commas
                    verseStart = verses;
                }
            }

            try {
                // Fetch Bible chapter
                const response = await fetch(`https://cdn.jsdelivr.net/gh/wldeh/bible-api/bibles/en-US-kjvcpb/books/${bookLower}/chapters/${chapter}.json`);
                const data = await response.json();

                // Filter and concatenate verses
                let versesText = '';
                data.data.forEach(verse => {
                    if (!verses || (verse.verse >= verseStart && (verseEnd === 'end' || verse.verse <= verseEnd))) {
                        versesText += verse.text + ' ';
                    }
                });

                // Display result
                resultDiv.innerHTML = versesText.trim();
            } catch (error) {
                resultDiv.innerHTML = 'Error fetching data: ' + error.message;
            }
        }
    </script>
</body>
</html>
